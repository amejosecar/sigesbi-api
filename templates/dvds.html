<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Gestión de DVDs</title>
  </head>
  <body>
    <h1>Gestión de DVDs</h1>
    <h2>Cargar Nuevo DVD</h2>
    <form action="/dvds/" method="post">
      <label for="codigo_inventario">Código Inventario:</label>
      <input type="number" name="codigo_inventario" required /><br />

      <label for="titulo">Título:</label>
      <input type="text" name="titulo" required /><br />

      <label for="autor">Autor:</label>
      <input type="text" name="autor" required /><br />

      <label for="isbn">ISBN:</label>
      <input type="text" name="isbn" /><br />

      <label for="duracion">Duración:</label>
      <input type="number" name="duracion" /><br />

      <label for="formato">Formato:</label>
      <input type="text" name="formato" /><br />

      <button type="submit">Cargar DVD</button>
    </form>

    <h2>Consultar DVD por Código</h2>
    <form action="/dvds/" method="get">
      <label for="codigo_inventario">Código Inventario:</label>
      <input type="number" name="codigo_inventario" required />
      <button type="submit">Consultar</button>
    </form>

    <h2>Consulta Masiva de DVDs</h2>
    <a href="/dvds/">Ver todos los DVDs</a>

    <h2>Eliminar DVD</h2>
    <form
      action="/dvds/"
      method="post"
      onsubmit="confirm('¿Seguro que deseas eliminar?')"
    >
      <label for="codigo_inventario">Código Inventario:</label>
      <input type="number" name="codigo_inventario" required />
      <button type="button" onclick="eliminarDVD()">Eliminar</button>
    </form>

    <script>
      function eliminarDVD() {
        const codigo = document.querySelector(
          'input[name="codigo_inventario"]'
        ).value;
        fetch(`/dvds/${codigo}`, { method: "DELETE" })
          .then((response) => response.json())
          .then((data) => alert(JSON.stringify(data)))
          .catch((error) => alert("Error: " + error));
      }
    </script>
  </body>
</html>
