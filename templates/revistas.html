<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Gestión de Revistas</title>
  </head>
  <body>
    <h1>Gestión de Revistas</h1>
    <h2>Cargar Nueva Revista</h2>
    <form action="/revistas/" method="post">
      <label for="codigo_inventario">Código Inventario:</label>
      <input type="number" name="codigo_inventario" required /><br />

      <label for="titulo">Título:</label>
      <input type="text" name="titulo" required /><br />

      <label for="autor">Autor:</label>
      <input type="text" name="autor" required /><br />

      <label for="isbn">ISBN:</label>
      <input type="text" name="isbn" /><br />

      <label for="numero_edicion">Número de Edición:</label>
      <input type="number" name="numero_edicion" /><br />

      <label for="fecha_publicacion">Fecha de Publicación:</label>
      <input type="text" name="fecha_publicacion" /><br />

      <button type="submit">Cargar Revista</button>
    </form>

    <h2>Consultar Revista por Código</h2>
    <form action="/revistas/" method="get">
      <label for="codigo_inventario">Código Inventario:</label>
      <input type="number" name="codigo_inventario" required />
      <button type="submit">Consultar</button>
    </form>

    <h2>Consulta Masiva de Revistas</h2>
    <a href="/revistas/">Ver todas las Revistas</a>

    <h2>Eliminar Revista</h2>
    <form
      action="/revistas/"
      method="post"
      onsubmit="confirm('¿Seguro que deseas eliminar?')"
    >
      <label for="codigo_inventario">Código Inventario:</label>
      <input type="number" name="codigo_inventario" required />
      <button type="button" onclick="eliminarRevista()">Eliminar</button>
    </form>

    <script>
      function eliminarRevista() {
        const codigo = document.querySelector(
          'input[name="codigo_inventario"]'
        ).value;
        fetch(`/revistas/${codigo}`, { method: "DELETE" })
          .then((response) => response.json())
          .then((data) => alert(JSON.stringify(data)))
          .catch((error) => alert("Error: " + error));
      }
    </script>
  </body>
</html>
