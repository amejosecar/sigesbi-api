<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Gestión de Usuarios</title>
  </head>
  <body>
    <h1>Gestión de Usuarios</h1>
    <h2>Registrar Nuevo Usuario</h2>
    <form action="/usuarios/" method="post">
      <label for="nombre">Nombre:</label>
      <input type="text" name="nombre" required /><br />

      <label for="apellido">Apellido:</label>
      <input type="text" name="apellido" required /><br />

      <label for="email">Email:</label>
      <input type="email" name="email" required /><br />

      <button type="submit">Registrar Usuario</button>
    </form>

    <h2>Consultar Usuario por ID</h2>
    <form action="/usuarios/" method="get">
      <label for="usuario_id">ID de Usuario:</label>
      <input type="number" name="usuario_id" required />
      <button type="submit">Consultar</button>
    </form>

    <h2>Consulta Masiva de Usuarios</h2>
    <a href="/usuarios/">Ver todos los Usuarios</a>

    <h2>Eliminar Usuario</h2>
    <form
      action="/usuarios/"
      method="post"
      onsubmit="confirm('¿Seguro que deseas eliminar?')"
    >
      <label for="usuario_id">ID de Usuario:</label>
      <input type="number" name="usuario_id" required />
      <button type="button" onclick="eliminarUsuario()">Eliminar</button>
    </form>

    <script>
      function eliminarUsuario() {
        const usuario_id = document.querySelector(
          'input[name="usuario_id"]'
        ).value;
        fetch(`/usuarios/${usuario_id}`, { method: "DELETE" })
          .then((response) => response.json())
          .then((data) => alert(JSON.stringify(data)))
          .catch((error) => alert("Error: " + error));
      }
    </script>
  </body>
</html>
